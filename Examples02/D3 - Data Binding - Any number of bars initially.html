<!DOCTYPE html>
<html>
	<head>
		<title>D3 - Data Binding - Any number of bars initially</title>
		<!-- <script type="text/javascript" src="d3/d3.min.js"></script>  -->
		<script src="https://d3js.org/d3.v4.min.js"></script>
	</head>

	<body>

		<svg>
			<!-- We can have any number of bars here! -->

			<!-- <rect x="10" y="20" width="25" height="90"></rect>
			<rect x="100" y="20" width="30" height="50"></rect>
			<rect x="200" y="100" width="40" height="50"></rect> -->			

		</svg>

        <script type="text/javascript">
     
			anEasy2UnderstandCode();
			// aConciseCode();
			
			function anEasy2UnderstandCode() {
				var svg = d3.select("svg");
	    		var padding = 10;
	        	var barHeight = 20;
	        	var data = [20, 40, 60];

	        	var initialRects = svg.selectAll("rect").data(data);
				var removedRects = initialRects.exit().remove();
				var newRects = initialRects.enter().append("rect");
				var allRects = initialRects.merge(newRects); 
				// Or, var allRects = svg.selectAll("rect");

				allRects
					.attr("x", 0)
					.attr("y", function(d, i) {
						return padding + i * (barHeight + padding);
					})
					.attr("width", function(d, i) { 
						return d; 
					})
					.attr("height", barHeight)
					.style("fill", "steelblue");
			}

	        function aConciseCode() {
	        	var svg = d3.select("svg");
	    		var padding = 10;
	        	var barHeight = 20;
	        	var data = [20, 40, 60];

	        	var rects = svg.selectAll("rect").data(data);

				rects.exit().remove();

				rects = rects
					.enter()
					.append("rect")
					.merge(rects);

				rects
					.attr("x", 0)
					.attr("y", function(d, i) {
						return padding + i * (barHeight + padding);
					})
					.attr("width", function(d, i) { 
						return d; 
					})
					.attr("height", barHeight)
					.style("fill", "steelblue");
			}
        </script>

	</body>
</html>